# 回溯算法

<img src="https://img-blog.csdnimg.cn/20210219192050666.png" alt="回溯算法大纲" style="zoom:50%;" />



## 1. 什么是回溯法

回溯法也叫回溯搜索法，是一种搜索的方式。

回溯法通常用来解决一些棘手的搜索问题，这些问题在暴力的情况下通常非常难以编写程序实现，因为硬写的话会涉及到非常多的嵌套循环，时间开销相当大。

在二叉树中有几个题目我们已经使用过回溯法了，其实回溯法本质上就是递归，在递归的基础上对元素进行处理。





## 2. 回溯法的效率

回溯法不是什么特别高效的算法，本质上就是利用递归来**穷举**。

虽然说效率不高，但是还得用。因为有的题目不能追求效率，能求解出来就不错了。





## 3. 回溯法中的树形结构

因为任何回溯法都涉及到使用递归来处理，所以任何回溯问题都可以抽象为树形结构（N叉树）。

回溯法一般都是用于解决集合中查找子集的问题，集合的大小就构成了树中集合对应该层的宽度，递归的深度（这个和什么时候找到答案可以终止了有关），就是树的深度。





## 4. 回溯法的一般模板

既然回溯法都是使用递归的，那么回溯法就有一套大概的模板，大部分情况下都是这个思路：

- 一个终止条件：一旦答案满足要求，就要返回
- 一个for循环处理集合：for循环在层内遍历，递归则在层间向下进行，递归返回后即回溯，进而选择其他的路径向下递归。

```c++
// 回溯一般是没有返回值的，因为需要找到所有的答案，不会提前返回
void backtracking(参数) {
    if (终止条件) {
        存放结果;
        return;
    }

    for (选择：本层集合中元素（树中节点孩子的数量就是集合的大小）) {
        处理节点;
        backtracking(路径，选择列表); // 递归
        回溯，撤销处理结果
    }
}
```



